<p-card [style]="{'margin-bottom': '2em'}">

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam
        deserunt
        quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate neque quas!
    </p>

    <div class="editor" *ngIf="edit">
        <p-tabView styleClass="webview-container">
            <p-tabPanel header="Lectura facil">
                <ng-template pTemplate="header">
                    <i class="pi pi-pencil"></i>
                    <span>Lectura facil</span>
                </ng-template>
                <angular-editor [placeholder]="'Lectura facil...'" [(ngModel)]="htmlContent" [config]="editorConfig">
                </angular-editor>
            </p-tabPanel>
            <p-tabPanel header="Audio descriptivo">
                <ng-template pTemplate="header">
                    <i class="pi pi-volume-up"></i>
                    <span>Audio descriptivo</span>
                </ng-template>
                <div class="audio-content">
                    <div class="default-audio" *ngIf="false">
                        <p>Audio generado automaticamente</p>
                        <audio class="audio audio-EACPBHCv" controls="" preload="none"
                            src="1. IntroducciÃ³n (online-audio-converter.com).mp3">
                        </audio>
                    </div>

                    <div class="select-audio" *ngIf="selectFile">
                        <ngx-dropzone class="dropzone" *ngIf="!loader" (change)="onSelect($event)" accept=" audio/*">
                            <ngx-dropzone-label>
                                <h6>Arrastre o seleccione un archivo.</h6>
                                <p-button label="Seleccionar archivo" icon="pi pi-cloud-upload" styleClass="p-button">
                                </p-button>
                            </ngx-dropzone-label>
                            <ngx-dropzone-preview *ngIf="file" (removed)="onRemove()" [removable]="true"
                                ngProjectAs="ngx-dropzone-preview" [file]="file">
                                <ngx-dropzone-label>{{ file.name }}</ngx-dropzone-label>

                            </ngx-dropzone-preview>
                        </ngx-dropzone>
                        <div class="buttons" *ngIf="file">
                            <button (click)="onCancelSelection()" pButton pRipple type="button" icon="pi pi-times"
                                label="Cancelar" class="p-button-danger"></button>
                            <button pButton pRipple type="button" label="Guardar" icon="pi pi-check"></button>
                        </div>
                    </div>

                    <div class="or-selectction" *ngIf="!file && !recordAudio">
                        <span>O</span>

                        <button id="audio-recor" (click)="onRecorAudio()" pButton pRipple type="button"
                            label="Grabe un audio" class="p-button-text"></button>
                    </div>

                    <div class="record-audio" *ngIf="recordAudio">
                        <ng-container *ngIf="permis; else parmisTemplate">
                            <span>{{hourRecord}}:{{minRecord}}:{{secRecord}}</span>
                            <div class="buttons-record">
                                <!-- pi-pause -->
                                <button (click)="record()" pButton pRipple type="button"
                                    [icon]="rec ? 'pi pi-pause' : 'pi pi-play'"
                                    class="p-button-rounded p-button-danger p-button-outlined"></button>
                                <button (click)="stopRecord()" *ngIf="recording" pButton pRipple type="button"
                                    icon="pi pi-check"
                                    class="p-button-rounded p-button-success p-button-outlined"></button>
                            </div>
                            <div class="record-player" *ngIf="audioURL">
                                <audio id="recordPlayer" [src]="audioURL | blobsanitizer" class="audio" #recordPlayer controls preload="none">
                                </audio>
                                <a id="audioDownload" pButton pRipple #audioDownload type="button" icon="pi pi-download"
                                    class="p-button-rounded p-button-primary p-button-outlined"></a>

                            </div>
                        </ng-container>
                        <ng-template #parmisTemplate>
                            <p>{{permisText}}</p>

                        </ng-template>

                        <div class="buttons">
                            <button (click)="onCancelSelection()" pButton pRipple type="button" icon="pi pi-times"
                                label="Cancelar" class="p-button-danger"></button>
                            <button [disabled]="!fileRecord" label="Guardar" pButton pRipple type="button"
                                icon="pi pi-check"></button>
                        </div>
                    </div>



                </div>
            </p-tabPanel>
        </p-tabView>

    </div>

    <p>{{htmlContent}}</p>

    <ng-template pTemplate="footer">
        <ng-container *ngIf="edit; else buttonTemplate">
            <p-button (click)="onSave()" label="Guardar" icon="pi pi-check"></p-button>
        </ng-container>
        <ng-template #buttonTemplate>
            <p-button (click)="edit = true" label="Editar" icon="pi pi-check"></p-button>
        </ng-template>
    </ng-template>
    
</p-card>